import{a,j as e}from"./vendor-react-query-BZoSzIJu.js";import{g as N,m as w,z as y,b as j,B as C}from"./HomePage-D2yojtKn.js";import{F as S,y as L,j as T,Y as F}from"./FormInput-HyhUTaM5.js";import{F as z}from"./FormSelect-NbdoiXu6.js";import{f as B}from"./vendor-web3-DyILjG9k.js";import"./bn-lqe85siY.js";import"./inherits_browser-ObB8GLRm.js";import"./hash-BGiI6FLj.js";const A=({onSelectToken:u,showBalancesOnly:l=!1,filterByCategory:n})=>{const{address:o,chainId:i}=B(),[c,v]=a.useState(""),[d,g]=a.useState("name"),f=a.useMemo(()=>i?N(i):[],[i]),{balances:m}=w(f,o),x=a.useMemo(()=>{let s=f;if(c){const r=c.toLowerCase();s=s.filter(t=>{var h,b,p;return t.name.toLowerCase().includes(r)||t.symbol.toLowerCase().includes(r)||((h=t.caliber)==null?void 0:h.toLowerCase().includes(r))||((b=t.category)==null?void 0:b.toLowerCase().includes(r))||((p=t.manufacturer)==null?void 0:p.toLowerCase().includes(r))})}return n&&(s=s.filter(r=>{var t;return((t=r.category)==null?void 0:t.toLowerCase())===n.toLowerCase()})),l&&(s=s.filter(r=>m[r.address]>0)),s.sort((r,t)=>d==="name"?r.name.localeCompare(t.name):d==="caliber"?!r.caliber&&!t.caliber?0:r.caliber?t.caliber?r.caliber.localeCompare(t.caliber):-1:1:0)},[f,c,n,l,d,m]);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsx(S,{label:"Search",placeholder:"Search name, symbol, caliber...",value:c,onChange:s=>v(s.target.value),sizeVariant:"small"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx(z,{label:"Sort by",options:[{value:"name",label:"Name"},{value:"caliber",label:"Caliber"}],value:d,onChange:s=>g(s.target.value),sizeVariant:"small",className:"w-full sm:w-auto"}),e.jsxs("div",{className:"text-xs font-mono text-muted mt-2 sm:mt-0",children:[x.length," item",x.length===1?"":"s"]})]})]}),x.length===0?e.jsx("div",{className:"text-center py-8 px-4 bg-muted/10 rounded-none border border-border",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-muted/20 rounded-none flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-3"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium font-mono text-sm",children:"No ammunition found"}),e.jsx("p",{className:"text-xs text-muted font-mono mt-1",children:"Try adjusting search or sort options"})]})]})}):e.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto pr-1",children:x.map(s=>e.jsx("div",{className:"border border-border rounded-none p-3 hover:bg-muted/20 bg-muted/10 transition-all cursor-pointer",onClick:()=>u({...s,address:s.address}),children:e.jsxs("div",{className:"flex items-start gap-3",children:[s.icon?e.jsx("img",{src:s.icon,alt:s.symbol,className:"w-8 h-8 flex-shrink-0 object-cover rounded-full",width:32,height:32}):e.jsx("div",{className:"w-8 h-8 bg-muted/30 rounded-full flex-shrink-0 flex items-center justify-center text-foreground font-bold font-mono text-xs",children:s.symbol.slice(0,2)}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium text-foreground font-mono text-sm truncate",children:s.symbol}),e.jsx("div",{className:"text-xs text-muted font-mono truncate",title:s.name,children:s.name})]}),e.jsx("div",{className:"text-xs font-mono bg-muted/20 text-muted px-2 py-0.5 rounded-full whitespace-nowrap self-start sm:self-center",children:"$10.00 "})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-1.5",children:[s.caliber&&e.jsx("div",{className:"text-xs font-mono bg-muted/20 text-muted px-2 py-0.5 rounded-full",children:s.caliber}),m[s.address]>0&&e.jsxs("div",{className:"text-xs font-mono bg-accentGreen/10 text-accentGreen px-2 py-0.5 rounded-full ml-auto",children:[m[s.address].toLocaleString()," bal."]})]})]})]})},s.address))})]})},P=({isOpen:u,onClose:l,onSelectToken:n,mode:o})=>e.jsx(y,{show:u,as:a.Fragment,children:e.jsxs(L,{as:"div",className:"relative z-50",onClose:l,children:[e.jsx(j,{as:a.Fragment,children:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm transition duration-300 data-[closed]:opacity-0","aria-hidden":"true"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-3 md:p-4",children:e.jsx(j,{as:a.Fragment,children:e.jsxs(T,{className:"w-full max-w-sm md:max-w-md transform overflow-hidden rounded-none bg-background border border-border p-4 md:p-6 transition-all duration-300 ease-out data-[closed]:opacity-0 data-[closed]:scale-95",children:[e.jsx(F,{as:"h3",className:"text-lg font-mono font-bold text-accentGreen mb-4",children:o==="ship"?"Select Ammo to Ship":"Select Ammo to Purchase"}),e.jsx("div",{className:"mt-3 md:mt-4",children:e.jsx(A,{onSelectToken:i=>n(i,o),showBalancesOnly:o==="ship"})}),e.jsx("div",{className:"mt-4 md:mt-6 flex justify-end pt-3 border-t border-border",children:e.jsx(C,{type:"button",variant:"secondary",onClick:l,children:"Cancel"})})]})})})]})});export{P as TokenSelectorDialog};
